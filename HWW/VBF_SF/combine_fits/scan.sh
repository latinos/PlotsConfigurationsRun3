combineCards.py hww_sr_2j_ee_2022EE=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022EE/datacards/hww_sr_2j_ee/events/datacard.txt hww_sr_2j_mm_2022EE=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022EE/datacards/hww_sr_2j_mm/events/datacard.txt  topcr_2j_mm_2022EE=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022EE/datacards/topcr_2j_mm/events/datacard.txt wwcr_2j_ee_2022EE=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022EE/datacards/wwcr_2j_ee/events/datacard.txt  wwcr_2j_mm_2022EE=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022EE/datacards/wwcr_2j_mm/events/datacard.txt hww_sr_2j_ee_2022=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022/datacards/hww_sr_2j_ee/events/datacard.txt hww_sr_2j_mm_2022=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022/datacards/hww_sr_2j_mm/events/datacard.txt  topcr_2j_mm_2022=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022/datacards/topcr_2j_mm/events/datacard.txt wwcr_2j_ee_2022=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022/datacards/wwcr_2j_ee/events/datacard.txt wwcr_2j_mm_2022=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022/datacards/wwcr_2j_mm/events/datacard.txt hww_sr_2j_ee_2023=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023/datacards/hww_sr_2j_ee/events/datacard.txt hww_sr_2j_mm_2023=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023/datacards/hww_sr_2j_mm/events/datacard.txt  topcr_2j_mm_2023=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023/datacards/topcr_2j_mm/events/datacard.txt wwcr_2j_ee_2023=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023/datacards/wwcr_2j_ee/events/datacard.txt  wwcr_2j_mm_2023=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023/datacards/wwcr_2j_mm/events/datacard.txt topcr_2j_ee_2023=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023/datacards/topcr_2j_ee/events/datacard.txt hww_sr_2j_mm_2023BPix=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023BPix/datacards/hww_sr_2j_mm/events/datacard.txt  topcr_2j_mm_2023BPix=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023BPix/datacards/topcr_2j_mm/events/datacard.txt wwcr_2j_ee_2023BPix=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023BPix/datacards/wwcr_2j_ee/events/datacard.txt  wwcr_2j_mm_2023BPix=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023BPix/datacards/wwcr_2j_mm/events/datacard.txt topcr_2j_ee_2023BPix=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023BPix/datacards/topcr_2j_ee/events/datacard.txt > fit.txt
#skipping the following to run tests
#topcr_2j_ee_2022EE=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022EE/datacards/topcr_2j_ee/events/datacard.txt
#topcr_2j_ee_2022=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2022/datacards/topcr_2j_ee/events/datacard.txt
#hww_sr_2j_ee_2023BPix=/afs/cern.ch/user/s/squinto/private/work/PlotsConfigurationRun3/HWW/VBF_SF/2023BPix/datacards/hww_sr_2j_ee/events/datacard.txt


text2workspace.py -P HiggsAnalysis.CombinedLimit.PhysicsModel:multiSignalModel  --PO verbose --PO 'map=.*/ggH:r[1,0,10]' --PO 'map=.*/qqH:r' fit.txt workspace.root

combine -M MultiDimFit --algo grid --points 50 --rMin -5.0 --rMax 10.0 -t -1 --setParameters r=1 --redefineSignalPOIs=r fit.root -m 125 -n expected.nominal --cminDefaultMinimizerStrategy 0

combine -M MultiDimFit --algo none --rMin -5.0 --rMax 10.0 -t -1 --setParameters r=1 --redefineSignalPOIs=r fit.root -m 125 -n expected.bestfit --cminDefaultMinimizerStrategy 0 --saveWorkspace

combine -M MultiDimFit --algo grid --points 50 --rMin -5.0 --rMax 10.0 -t -1 --setParameters r=1 --redefineSignalPOIs=r -m 125 -n expected.stat higgsCombineexpected.bestfit.MultiDimFit.mH125.root --snapshotName MultiDimFit --freezeParameters allConstrainedNuisances --cminDefaultMinimizerStrategy 0

plot1DScan.py higgsCombineexpected.nominal.MultiDimFit.mH125.root --main-label "stat. + syst." --POI r --others 'higgsCombineexpected.stat.MultiDimFit.mH125.root:stat.:2' --breakdown syst,stat

combine -M Significance fit.txt -t -1 -m 125 --expectSignal=1 > significance.txt